% compilação de fontes
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{amsfonts}
\usepackage{mathrsfs} % para mathscr
\usepackage[subentrycounter,seeautonumberlist,nonumberlist=true,toc]{glossaries}

  % % se for utilizar as fontes do sistema: **escolha sua fonte**
    % comandos de fontes
\usepackage{mathspec}
\usepackage{fontspec}
\setmathsfont(Digits,Latin,Greek){Source Serif Pro}
\setmathrm{Source Serif Pro}
\setmainfont[Numbers=OldStyle]{Source Serif Pro} %fonte principal (serifada)
\setsansfont[Scale=0.9]{Source Sans Pro} %fonte sem serifas
\setmonofont[Scale=MatchLowercase]{Source Code Pro} % fonte monoespaçada

\usepackage{polyglossia} %always load polyblossia after fonts for digits in math mode
\setmainlanguage{brazil}
\setotherlanguages{french,english,spanish,german,italian}

\newfontfamily\ipafont{Doulos SIL}
\newcommand{\ipa}[1]{{\ipafont #1}}

\usepackage{marginnote}

%% Observação: o pacote polyglossia pode apresentar erro ao ser utilizado com ifxetex + babel.
%% Se isso acontecer, atualize o pacote para a versão mais recente ou utilize somente uma das sequências (pdflatex ou xelatex), comentando ou apagando a outra.

\usepackage{microtype} 				% para melhorias de justificação
\usepackage[dvipsnames]{xcolor} 		% para cores
\usepackage{graphicx} 			% para imagens
\usepackage{booktabs,tabularx,rotating}	% para tabelas
\usepackage{mdframed} 				% para caixas de texto como na CIP do verso do título
\usepackage{multicol}				% tabelas com colunas mescladas
\usepackage{lettrine}				% letras capitulares
\usepackage{xspace} 				% para nao precisar de espaços com {} depois de comandos
									% como \LaTeX e abreviações criadas pelo usuário
\usepackage{lipsum} 				% para texto de preenchimento de exemplo
\usepackage{leading}				% espaçamento entrelinhas (leading)
\leading{13pt}

\usepackage{tikz}
\usetikzlibrary{matrix, backgrounds,fit}

\usepackage{siunitx}
% ---
% Pacotes de citações
% ---
\usepackage[backend=biber,style=alphabetic,citestyle=alphabetic,backref=true]{biblatex}
\bibliography{refs}
\DefineBibliographyStrings{brazil}{
  backrefpage = {citado na página},
  backrefpages = {citado nas páginas},
}

% ---
% Informações do documento
% ---
\titulo{Computadores e suas Abstrações}
\autor{Gabriel V. N. de Queiroz}
\data{2019, v<VERSION>}
\preambulo{Breve sinopse do livro}
\local{São Paulo}
\instituicao{Publicações Acadêmicas Ltda.\\ \abnTeX\ v<VERSION>}

% alterando o aspecto da cor azul
\definecolor{blue}{RGB}{41,5,195}

% informações do PDF
\makeatletter
\hypersetup{
     	%pagebackref=true,
		pdftitle={\@title},
		pdfauthor={\@author},
    	pdfsubject={\imprimirpreambulo},
	    pdfcreator={LaTeX with abnTeX2},
		pdfkeywords={abnt}{latex}{abntex}{abntex2}{livro},
		colorlinks=false,       		% false: boxed links; true: colored links
    	linkcolor=blue,          	% color of internal links
    	citecolor=blue,        		% color of links to bibliography
    	filecolor=magenta,      		% color of file links
		urlcolor=blue,
		bookmarksdepth=4
}
\makeatother
\usepackage{xurl}
% ---


% ---
% Estilo de capítulos
%
% \chapterstyle{pedersen}
% \chapterstyle{lyhne}
%\chapterstyle{madsen}
\chapterstyle{veelo}
%
% Veja outros estilos em:
% https://www.ctan.org/tex-archive/info/MemoirChapStyles
% ---

% para cabeçalhos sem estar em maiúsculas
%\nouppercaseheads

% -----
% Declarações de cabecalhos
% -----
% Cabecalho padrao
\makepagestyle{abntbookheadings}
\makeevenhead{abntbookheadings}{\ABNTEXfontereduzida\thepage}{}{\ABNTEXfontereduzida\textit\leftmark}
\makeoddhead{abntbookheadings}{\ABNTEXfontereduzida\textit\rightmark}{}{\ABNTEXfontereduzida\thepage}
\makeheadrule{abntbookheadings}{\textwidth}{\normalrulethickness}

% Cabecalho do inicio do capitulo
\makepagestyle{abntbookchapfirst}
\makeoddhead{abntbookchapfirst}{}{}{}

% Configura layout para elementos textuais
\renewcommand{\textual}{%
  \pagestyle{abntbookheadings}%
  \aliaspagestyle{chapter}{abntbookchapfirst}% customizing chapter pagestyle
  \nouppercaseheads%
  \bookmarksetup{startatroot}%
}
% ---



% Margens do documento
%% (margens do abntex2 não combinam nem com A5 nem com estilos de capítulo da
% classe memoir.)
\setlrmarginsandblock{2.5cm}{3.5cm}{*}
\setulmarginsandblock{2.5cm}{3.5cm}{*}
\checkandfixthelayout
% ---

% Termos indexados
\usepackage{makeidx}
\makeindex
% \providecommand{\myglsindextext}[1]{\glsentrydesc{#1} (\glsentrytext{#1})}
% \providecommand{\myglsindex}[1]{\index{\myglsindextext{#1}}}
\renewcommand{\glsnamefont}[1]{{\normalfont \textsc{#1}}}
\newcommand{\glsstyle}[1]{{\textsc{#1}}}
\providecommand{\myglsindex}[1]{\index{#1@\glsstyle{#1}}}
\providecommand{\mygls}[1]{{\scshape \gls{#1}\myglsindex{#1}}}
\providecommand{\myglspl}[1]{{\scshape \glspl{#1}\myglsindex{#1}}}
\providecommand{\myGls}[1]{{\scshape \Gls{#1}\myglsindex{#1}}}
\providecommand{\myGlspl}[1]{{\scshape \Glspl{#1}\myglsindex{#1}}}
\providecommand{\myglsIdx}[2]{{\scshape \gls{#1}\myglsindex{#2}}}
\providecommand{\myglsplIdx}[2]{{\scshape \glspl{#1}\myglsindex{#2}}}
\providecommand{\myGlsIdx}[2]{{\scshape \Gls{#1}\myglsindex{#2}}}
\providecommand{\myGlsplIdx}[2]{{\scshape \Glspl{#1}\myglsindex{#2}}}


% Números
\newcommand{\zb}{0\texttt{b}} % 0b prefix
\newcommand{\zx}{0\texttt{x}} % 0x prefix
\newcommand{\nx}[1]{0\texttt{x}\mathrm{#1}} % 0x prefix
\newcommand{\numfmt}[1]{\texttt{#1}}
\newcommand\ldiv[2]{% long division
$\strut#1$\kern.25em\smash{\raise.3ex\hbox{$\big)$}}$\mkern-8mu
        \overline{\enspace\strut#2}$}

\input{glossario}

\setlrmarginsandblock{3cm}{6cm}{*}
\setulmarginsandblock{3cm}{6cm}{*}
\checkandfixthelayout
\setlength{\marginparwidth}{\marginparwidth-1cm}
\renewcommand*{\marginpar}[1]{
            \checkoddpage
            \ifoddpage
               \marginparmargin{right}
            \else
               \marginparmargin{right}%left
            \fi
            \marginnote{#1}}